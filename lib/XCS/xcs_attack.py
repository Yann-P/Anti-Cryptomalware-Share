import datetime
from itertools import count


class XCSAttack():
	
	_ids = count(0)

	def __init__(self, username, ip, hostname, damage):
		self.id  			= next(XCSAttack._ids)
		self.datetime 			= datetime.datetime.now()
		self.username 			= username
		self.ip 			= ip
		self.hostname 			= hostname
		self._damage 			= damage
		self._last_notification_time 	= datetime.datetime.min

	def set_damage(self, damage):
		print("updated damage")
		self._damage = damage

	def get_damage(self):
		return self._damage

	def seconds_since_last_notification(self):
		return (datetime.datetime.now() - self._last_notification_time).total_seconds()

	def reset_last_notification_time(self):
		self._last_notification_time = datetime.datetime.now()

	def __repr__(self):
		return "[XCSAttack id=%d]" % self.id

	def __str__(self):
		return "[XCSAttack id=%d datetime=%s from username=%s ip=%s hostname=%s damage=%s]" % (self.id, self.datetime.strftime('%Y-%m-%d %H:%M:%S'), self.username, self.ip, self.hostname, self._damage)

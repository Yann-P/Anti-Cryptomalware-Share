import smtplib
from email.MIMEMultipart import MIMEMultipart
from email.MIMEText import MIMEText
import sys

class XCSMailHelper:

    @staticmethod
    def send_mail(mail_to, subject, message):

        if XCSMailHelper._hostname is None or XCSMailHelper._sender_address is None or XCSMailHelper._port is None:
            sys.stderr.write("XCSMailHelper is not configured. Please use XCSMailHelper::configure static method\n")
            return False

        try:
            msg = MIMEMultipart()
            msg['From'] = XCSMailHelper._sender_address
            msg['To'] = mail_to
            msg['Subject'] = subject

            msg.attach(MIMEText(message, 'plain'))

            server = smtplib.SMTP(XCSMailHelper._hostname, XCSMailHelper._port)
            #server.starttls()
            #server.login(_sender_address, "YOUR PASSWORD")
            text = msg.as_string()
            #server.sendmail(_sender_address, mail_to, text)
            server.quit()

        except smtplib.SMTPException as e:
            sys.stderr.write("SMTPException", str(e))
            return False

        return True

    @staticmethod
    def configure(hostname, sender_address, port):
        XCSMailHelper._hostname = hostname
        XCSMailHelper._sender_address = sender_address
        XCSMailHelper._port = port

XCSMailHelper._hostname = None
XCSMailHelper._port  = None
XCSMailHelper._sender_address 	= None
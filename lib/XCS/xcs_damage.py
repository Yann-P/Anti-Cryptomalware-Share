# Copyright 2016 Technical University of Denmark
# Yann Pellegrini, Hugo Maxwell Connery
# Licensed under GPLv3

from enum import Enum

class XCSDamage(object):

	def __init__(self, num_created=0, num_modified=0, num_deleted=0):
		self._num_created = num_created
		self._num_modified = num_modified
		self._num_deleted = num_deleted

	def add_damage_type(self, damage_type, amount=1):
		if damage_type == XCSDamageType.CREATION:
			self._num_created += amount
		elif damage_type == XCSDamageType.MODIFICATION:
			self._num_modified += amount
		elif damage_type == XCSDamageType.DELETION:
			self._num_deleted += amount
		
	def __str__(self):
		return "%d created files, %d modified files and %d deleted files" % (self._num_created, self._num_modified, self._num_deleted)

	def __eq__(self, obj):
		if not isinstance(obj, XCSDamage):
			return False
		return obj._num_created == self._num_created and obj._num_modified == self._num_modified and obj._num_deleted == self._num_deleted

	def __repr__(self):
		return "XCSDamage(num_created=%d num_modified=%d num_deleted=%d)" % (self._num_created, self._num_modified, self._num_deleted)

	def __add__(self, obj):
		if isinstance(obj, XCSDamage):
			self._num_created += obj._num_created
			self._num_modified += obj._num_modified
			self._num_deleted += obj._num_deleted
		else:
			raise TypeError("You cannot add a XCSDamage object with another object type.")
		return self


class XCSDamageType(Enum):
	MODIFICATION = 'm' # file modification
	CREATION = 'c' # file creation
	DELETION = 'd' # file deletion


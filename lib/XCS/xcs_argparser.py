from argparse import ArgumentParser

class XCSArgParser(ArgumentParser):

	ACTIONS = ['monitor', 'rollback', 'test_email']

	def __init__(self, prog_name, prog_desc, prog_epilog, config_path):

		ArgumentParser.__init__(self, prog=prog_name, description=prog_desc, epilog=prog_epilog)


		self.add_argument(
			 'action'
			, help='The action to take: ' + str(self.ACTIONS)
		)
		self.add_argument(
			  '-v'
			, '--verbose'
			, action="store_true"
			, default=False
			, help="Debug mode"
		)
		self.add_argument(
			 '-c'
			,'--config-file'
			, nargs="?"
			, default=config_path
			, help="config file"
		)

	# override
	def parse_args(self):
		args = ArgumentParser.parse_args(self)

		if not args.action in self.ACTIONS:
			raise XCSArgumentError("Invalid action " + args.action)

		if args.verbose:
			print "Dumping args: \n", args, "\nEnd of args.\n"

		return args

class XCSArgumentError(Exception):
    pass

#!/bin/bash

# Attack the share:
#
# 8 new files
# 35 file overwrites
# 4 deletions
#
# The purpose is to generate lots of lines in the samba log
# that will be noticed.

ME=$(basename $0)
DIR=$(dirname $0)
LIB=$DIR/xcs-test-lib.sh
DATA=$DIR/../std-data

if [ ! -d $DATA ]
then
	echo "Something is very wrong; I dont have my data at $DATA"
	exit 1
elif ! source $LIB
then
	echo "Something is very wrong: I dont have my test lib $LIB"
fi

test_connect && info "connect works"

# Ensure basic files are there
for name in a b c d e f g
do
	put_file $DATA/${name}.bat $name.bat
done

# Create new files
for (( i=0 ; i<8 ; ++i ))
do
	new_file 
done

for (( i=0 ; i<5 ; ++i ))
do
	for name in a b c d e f g
	do
		over=$name.dat
		with=$DATA/${name}2.dat
		overwrite_file $with $over 
	done
done

for name in a b c d 
do
	delete_file $name.dat 
done


